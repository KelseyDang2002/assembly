     1                                  ; Author: Kelsey Dang
     2                                  ; Email: kdangdo2002@csu.fullerton.edu
     3                                  ; Due Date: 10/4/23
     4                                  ; Subject: CPSC 240-03 Assignment 1 Las Vegas Problem
     5                                  ; Filename: compute_trip.asm
     6                                  
     7                                  global las_vegas
     8                                  extern printf
     9                                  extern scanf
    10                                  
    11                                  section .data
    12                                    ; Constants
    13 00000000 506C6561736520656E-       initial_msg db "Please enter the speed for the initial segment of the trip (mph): ", 0
    13 00000009 746572207468652073-
    13 00000012 7065656420666F7220-
    13 0000001B 74686520696E697469-
    13 00000024 616C207365676D656E-
    13 0000002D 74206F662074686520-
    13 00000036 7472697020286D7068-
    13 0000003F 293A2000           
    14                                    initial_msg_len equ $-initial_msg
    15 00000043 466F7220686F77206D-       miles_msg db "For how many miles will you maintain this average speed: ", 0
    15 0000004C 616E79206D696C6573-
    15 00000055 2077696C6C20796F75-
    15 0000005E 206D61696E7461696E-
    15 00000067 207468697320617665-
    15 00000070 726167652073706565-
    15 00000079 643A2000           
    16                                    miles_msg_len equ $-miles_msg
    17 0000007D 576861742077696C6C-       final_seg_msg db "What will be your speed during the final segment of the trip (mph): ", 0
    17 00000086 20626520796F757220-
    17 0000008F 737065656420647572-
    17 00000098 696E67207468652066-
    17 000000A1 696E616C207365676D-
    17 000000AA 656E74206F66207468-
    17 000000B3 65207472697020286D-
    17 000000BC 7068293A2000       
    18                                    final_seg_msg_len equ $-final_seg_msg
    19 000000C2 596F75722061766572-       avg_speed_msg db "Your average speed will be %1.18lf mph.", 10, 0
    19 000000CB 616765207370656564-
    19 000000D4 2077696C6C20626520-
    19 000000DD 25312E31386C66206D-
    19 000000E6 70682E0A00         
    20                                    avg_speed_msg_len equ $-avg_speed_msg
    21 000000EB 54686520746F74616C-       total_msg db "The total travel time will be %1.18lf hours.", 10, 0
    21 000000F4 2074726176656C2074-
    21 000000FD 696D652077696C6C20-
    21 00000106 62652025312E31386C-
    21 0000010F 6620686F7572732E0A-
    21 00000118 00                 
    22                                    total_msg_len equ $-total_msg
    23 00000119 256C6600                  floatform db "%lf", 0
    24 0000011D 0000000000B06F40          hotel_distance dq 253.5
    25                                  
    26                                  section .text
    27                                  las_vegas:                ; start here
    28                                  
    29                                    ; Prompt for input of initial distance
    30 00000000 B800000000                mov rax, 0              ; rax counts number of float register
    31 00000005 48BF-                     mov rdi, initial_msg
    31 00000007 [0000000000000000] 
    32 0000000F E8(00000000)              call printf
    33                                    ; End of block
    34                                  
    35                                    ; Get initial from user
    36 00000014 B800000000                mov rax, 0
    37 00000019 48BF-                     mov rdi, floatform
    37 0000001B [1901000000000000] 
    38 00000023 6A00                      push qword 0            ; push to top of stack
    39 00000025 4889E6                    mov rsi, rsp
    40 00000028 E8(00000000)              call scanf
    41 0000002D F2440F100424              movsd xmm8, [rsp]       ; dereference rsp and copy to xmm8
    42 00000033 58                        pop rax                 ; restore stack
    43                                    ; End of block
    44                                  
    45                                    ; Prompt for input of miles maintained
    46 00000034 B800000000                mov rax, 0
    47 00000039 48BF-                     mov rdi, miles_msg
    47 0000003B [4300000000000000] 
    48 00000043 E8(00000000)              call printf
    49                                    ; End of block
    50                                  
    51                                    ; Get miles from user
    52 00000048 B800000000                mov rax, 0
    53 0000004D 48BF-                     mov rdi, floatform
    53 0000004F [1901000000000000] 
    54 00000057 6A00                      push qword 0
    55 00000059 4889E6                    mov rsi, rsp
    56 0000005C E8(00000000)              call scanf
    57 00000061 F2440F100C24              movsd xmm9, [rsp]
    58 00000067 58                        pop rax
    59                                    ; End of block
    60                                  
    61                                    ; Prompt for input of final speed
    62 00000068 B800000000                mov rax, 0
    63 0000006D 48BF-                     mov rdi, final_seg_msg
    63 0000006F [7D00000000000000] 
    64 00000077 E8(00000000)              call printf
    65                                    ; End of block
    66                                  
    67                                    ; Get final_seg from user
    68 0000007C B800000000                mov rax, 0
    69 00000081 48BF-                     mov rdi, floatform
    69 00000083 [1901000000000000] 
    70 0000008B 6A00                      push qword 0
    71 0000008D 4889E6                    mov rsi, rsp
    72 00000090 E8(00000000)              call scanf
    73 00000095 F2440F101424              movsd xmm10, [rsp]
    74 0000009B 58                        pop rax
    75                                    ; End of block
    76                                  
    77                                    ; Block to copy 25.3 into xmm1
    78 0000009C F20F100C25-               movsd xmm1, qword [hotel_distance]
    78 000000A1 [1D010000]         
    79                                  
    80                                    ; Output avg_speed_msg
    81 000000A5 B800000000                mov rax, 0
    82 000000AA 48BF-                     mov rdi, avg_speed_msg
    82 000000AC [C200000000000000] 
    83 000000B4 E8(00000000)              call printf
    84                                    ; End of block
    85                                  
    86                                    ; Output total travel time
    87 000000B9 B800000000                mov rax, 0
    88 000000BE 48BF-                     mov rdi, total_msg
    88 000000C0 [EB00000000000000] 
    89 000000C8 E8(00000000)              call printf
    90                                    ; End of block
